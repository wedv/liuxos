
<!DOCTYPE html>
<html>
    <head>
		<meta charset="UTF-8">
        <title>债权数量走势</title>
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <link rel="shortcut icon" href="http://www.jqchart.com/jquery/chart/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="http://www.jqchart.com/jquery/chart/Content/jquery.jqChart.css" />
        <link rel="stylesheet" type="text/css" href="http://www.jqchart.com/jquery/chart/Content/jquery.jqRangeSlider.css" />
        <link rel="stylesheet" type="text/css" href="http://www.jqchart.com/jquery/chart/Content/themes/le-frog/jquery-ui-1.8.20.css" />

        <!-- 新 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
        
        <!-- 可选的Bootstrap主题文件（一般不用引入） -->
        <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    </head>
    <body>
        <!-- containers  -->
        <div id="con">
            <!-- header -->
            <!-- /header -->
            <div id="con0_sub">
                <div id="con01_sub">
                    <!-- /sub page header-->
                    <!-- content -->
                    <div id="content">
                        <table>
                            <tr>
                                <td style="width: 100%; vertical-align: top;">

                                    <div>
                                        <input type="text" id="days" value="{'d':'20141104,20141105'}" style="width:900px;"/>
                                        <input type="button" onclick="ddd()" value="刷新">
                                        
                                        </div>
                                    </div>

                                    <br />
                                </td>
                            </tr>
                        </table>
                    </div>
                    <!-- / content -->
                </div>
            </div>
        </div>
        <div id="jqChart" class="jumbotron" style="height: 800px;">
        <!-- / containers  -->
        <!-- footer -->
        <!-- / footer -->
        
        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
        
        <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
        <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

        <script src="http://www.jqchart.com/jquery/chart/Scripts/jquery.mousewheel.js" type="text/javascript"></script>
        <script src="http://www.jqchart.com/jquery/chart/Scripts/jquery.jqChart.min.js" type="text/javascript"></script>
        <script src="http://www.jqchart.com/jquery/chart/Scripts/jquery.jqRangeSlider.min.js" type="text/javascript"></script>
        
        <script>
            function addDays(date, value) {
                var newDate = new Date(date.getTime());
                newDate.setDate(date.getDate() + value);
                return newDate;
            }
            function getTstr(myDate) {
                return myDate.getFullYear() + '-' + (myDate.getMonth() + 1) + '-' + myDate.getDate();
            }
            $(document).ready(function() {
                var myDate = new Date();
                var rrr = getTstr(addDays(myDate, -7));
                for (var i = 6; i >= 0; i--) {
                    rrr += ',' + getTstr(addDays(myDate, -i));
                }
                $('#days').val('{d:"' + rrr + '",l:13}');
                ddd();
            });
            function ddd() {
                eval('var $data=' + $('#days').val());
                $.ajax({
                    url: 'http://liuxos3.duapp.com/wx/rrd_ls.php?r=d',
                    data: $data,
                    dataType: 'jsonp',
                    success: function(xhr) {
                        var d = xhr;
                        var series = [];
                        for (i in d) {
                            var item = {
                                title: i,
                                type: 'line',
                                data: d[i],
                                markers: null
                            };
                            series.push(item);
                        }
                        $('#jqChart').jqChart({
                            title: '债权数量走势',
                            legend: {title: '日期'},
                            tooltips: {type: 'shared'},
                            crosshairs: {
                                enabled: true,
                                hLine: false,
                                vLine: {strokeStyle: '#cc0a0c'}
                            },
                            axes: [
                                {
                                    type: 'linear',
                                    location: 'bottom',
                                    zoomEnabled: true
                                }
                            ],
                            series: series
                        });
                    }
                });
            }
        </script>
    </body>
</html>
